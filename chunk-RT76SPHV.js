import{b as be,f as w,g as y,h as xe}from"./chunk-A2K37IAS.js";import{Aa as he,Ba as ve,Ca as D,Da as N,Ea as U,Fa as a,Ga as c,Ha as k,Ia as E,Ka as f,La as d,Ma as ae,Na as Ce,Q as _e,Qa as I,Ra as W,S as O,U as b,W as g,X as _,Y as Z,Z as se,kb as Q,mb as F,na as x,oa as h,qa as m,ta as P,wa as S,xa as $,ya as B}from"./chunk-FBTMNZXZ.js";import"./chunk-35PI25VP.js";var j=class t{get occupancy(){return new l(this.normie_pieces_bitboard.getBoard()|this.golden_pieces_bitboard.getBoard())}get normie_pieces(){return this._normie_pieces}get golden_pieces(){return this._golden_pieces}get golden_squares(){return this._golden_squares}constructor(e,o,r){this._listOfMoves=[],this._undoList=[],this._currentLegalMoves=[],this._gameState=M.UNDEFINED,this.WIDTH=8,this.HEIGHT=8,this.SIZE=this.WIDTH*this.HEIGHT,this._normie_pieces=[],this._golden_pieces=[],this._golden_squares=[],this.normie_pieces_bitboard=new l(e.getBoard()&~o.getBoard()),this.golden_pieces_bitboard=o,this.golden_squares_bitboard=r,this.updateBitboardToSquares(),this.generateCurrentLegalMoves()}updateBitboardToSquares(){this._normie_pieces=G(this.normie_pieces_bitboard),this._golden_pieces=G(this.golden_pieces_bitboard),this._golden_squares=G(this.golden_squares_bitboard)}checkWin(){return pe(this.golden_pieces_bitboard,this.golden_squares_bitboard).getBoard()===this.golden_squares_bitboard.getBoard()?M.WIN:M.UNDEFINED}get gameState(){return this._gameState}get turn(){return this.moveHistory.length}get moveHistory(){return this._listOfMoves}get undoHistory(){return this._undoList}get currentLegalMoves(){return this._currentLegalMoves}undoMove(){let e=this._listOfMoves.pop();return e?(this.makeMove(Y(e.destination,e.origin)),this.generateCurrentLegalMoves(),this._undoList.push(e),R.UNDO_SUCCESS):u.NO_MOVE_TO_UNDO}redoMove(){if(!this._undoList)return u.NO_MOVE_TO_REDO;let e=this._undoList.pop();return e?(this.makeMove(e),this._listOfMoves.push(e),this.generateCurrentLegalMoves(),R.REDO_SUCCESS):u.NO_MOVE_TO_REDO}goToMove(e){if(this.moveHistory.length+this.undoHistory.length===0)return u.NO_MOVE_TO_GO;let o=Math.abs(this.moveHistory.length-e);if(e===this.moveHistory.length)return R.GO_TO_SUCCESS;if(this.moveHistory.length>e)for(let r=0;r<o;r++)this.undoMove();else if(this.moveHistory.length<e){if(this.undoHistory.length<e-this.moveHistory.length)return u.NO_MOVE_TO_GO;for(let r=0;r<o;r++)this.redoMove()}return R.GO_TO_SUCCESS}resetBoard(){this.goToMove(0),this._listOfMoves=[],this._undoList=[]}inputMove(e){if(!this.isValidSquare(e.origin)||!this.isValidSquare(e.destination))return u.NOT_VALID_SQUARE;if(!this.isPieceOnSquare(e.origin))return u.COULD_NOT_FIND_PIECE;if(this.isPieceOnSquare(e.destination))return u.POSITION_OCCUPIED;if(!this._currentLegalMoves.find(i=>de(i,e)))return u.NOT_LEGAL_MOVE;this.makeMove(e),this._listOfMoves.push(e);let r=this.undoHistory.pop();r&&(de(e,r)||(this._undoList=[])),this.generateCurrentLegalMoves();let n=this.checkWin();return n===M.WIN?M.WIN:(this._gameState=n,R.MOVE_SUCCESS)}makeMove(e){let o=Se(e);(Be(e).getBoard()&this.golden_pieces_bitboard.getBoard())>0?this.golden_pieces_bitboard=ce(this.golden_pieces_bitboard,o):this.normie_pieces_bitboard=ce(this.normie_pieces_bitboard,o),this.updateBitboardToSquares()}isValidSquare(e){let o=T(e);return o>=0&&o<this.SIZE}isPieceOnSquare(e){let o=T(e);return!!ue(this.normie_pieces_bitboard,this.golden_pieces_bitboard).getBit(o)}generateCurrentLegalMoves(){this._currentLegalMoves=[],G(this.occupancy).forEach(o=>{let r=this.generateLegalMovesFromSquare(o);this._currentLegalMoves=[...this._currentLegalMoves,...r]})}generateLegalMovesFromSquare(e){let o=this.attacksBitboard(T(e));return G(o).map(r=>({origin:e,destination:r}))}attacksBitboard(e){let o=l.empty().setBit(e).getBoard(),r=L(o),n=this.occupancy.getBoard(),i=l.rankMask(J(e)).getBoard(),s=l.fileMask(K(e)).getBoard(),p=n&i,v=L(p),C=n&s,V=L(C),ie=(p-BigInt(2)*o^L(v-BigInt(2)*r))&i&le((n^o)&i),He=(C-BigInt(2)*o^L(V-BigInt(2)*r))&s&le((n^o)&s);return new l(ie|He)}static EMPTY(){return new t(l.empty(),l.empty(),l.empty())}},u=function(t){return t.POSITION_OCCUPIED="There is already another piece in that location!",t.COULD_NOT_FIND_PIECE="No piece could be found in that location.",t.NOT_VALID_SQUARE="Not a valid square.",t.NOT_LEGAL_MOVE="Not a legal move.",t.NO_MOVE_TO_UNDO="No move left to Undo.",t.NO_MOVE_TO_REDO="No move left to Redo.",t.NO_MOVE_TO_GO="No move to go to.",t.WRONG_INPUT="You submitted a wrong input.",t}(u||{}),R=function(t){return t.MOVE_SUCCESS="Successfully moved piece.",t.UNDO_SUCCESS="Successfully undid move.",t.REDO_SUCCESS="Successfully redid move.",t.GO_TO_SUCCESS="Successfully restored turn.",t}(R||{}),M=function(t){return t.WIN="You won the game",t.UNDEFINED="Undefined",t.LOST="You lost",t}(M||{}),A=t=>!!Object.values(u).includes(t);var Ve=new ArrayBuffer(256),me=new Uint8Array(Ve),ee=t=>[t,t+2*64,t+1*64,t+3*64],te=t=>[...ee(t),...ee(t+2*16),...ee(t+1*16),...ee(t+3*16)],re=t=>[...te(t),...te(t+2*4),...te(t+1*4),...te(t+3*4)];me.set([...re(0),...re(2),...re(1),...re(3)]);var l=class t{constructor(e){let o=BigInt.asUintN(64,e);this.validateBitboard(o),this.board=o}validateBitboard(e){if(e<BigInt(0)||e>BigInt("0xFFFFFFFFFFFFFFFF"))throw new Error("Invalid uint64 bitboard. Must be between 0 and 0xFFFFFFFFFFFFFFFF.")}getBoard(){return this.board}leftShift(e){return new t(this.board<<BigInt(e))}rightShift(e){return new t(this.board>>BigInt(e))}setBit(e){return ue(this,t.one().leftShift(e))}clearBit(e){return pe(this,Pe(t.one().leftShift(e)))}getBit(e){let o=this.board>>BigInt(e);return Number(o&BigInt(1))}surroundingBits(){let o=this.getBoard(),r=this.getBoard();for(let n=0;n<8;n++)for(let i=0;i<8;i++){let s=n*8+i;if((r&1n<<BigInt(s))!==0n)for(let p=-1;p<=1;p++)for(let v=-1;v<=1;v++){let C=n+p,V=i+v;if(C>=0&&C<8&&V>=0&&V<8&&!(p!==0&&v!==0)){let ie=C*8+V;o|=1n<<BigInt(ie)}}}return o&=~r,new t(o)}static fromBinaryString(e){let o=BigInt("0b"+e);return new t(o)}static fromBinary(e){let o=BigInt(e);return new t(o)}static empty(){return new t(BigInt(0))}static one(){return new t(BigInt(1))}static fileMask(e){if(e<0||e>7)throw new Error("Invalid file. Must be between 0 and 7.");let o=t.empty();for(let r=0;r<8;r++){let n=r*8+e;o=o.setBit(n)}return o}static rankMask(e){if(e<0||e>7)throw new Error("Invalid rank. Must be between 0 and 7.");let o=t.empty();for(let r=0;r<8;r++){let n=e*8+r;o=o.setBit(n)}return o}asTableString(e="1"){let o=this.board.toString(2).padStart(64,"0"),r="";for(let n=0;n<8;n++){let i="";for(let s=7;s>=0;s--){let p=n*8+s;i+=o[p]==="1"?`${e} `:"0 "}r+=i.trim()+`
`}return r.trim()}logAsArray(){let e=this.board.toString(2).padStart(64,"0"),o=[];for(let r=7;r>=0;r--)o.push(e.slice(r*8,(r+1)*8).split("").reverse().join(" "));return o}static full(){return new t(BigInt("0xFFFFFFFFFFFFFFFF"))}},ce=(t,e)=>new l(t.getBoard()^e.getBoard()),ue=(t,e)=>new l(t.getBoard()|e.getBoard()),pe=(t,e)=>new l(t.getBoard()&e.getBoard()),Pe=t=>new l(~t.getBoard()),J=t=>Math.floor(t/8),K=t=>t%8;var G=t=>{let e=[];for(let o=0;o<64;o++)t.getBit(o)===1&&e.push(X(o));return e};var Se=t=>l.empty().setBit(T(t.origin)).setBit(T(t.destination)),Be=t=>l.empty().setBit(T(t.origin));var L=t=>{let e=De(t),o=Ue(e);return Ne(o)},De=t=>{let e=new Uint8Array(8);for(let o=0;o<8;o++)e[o]=Number(t>>BigInt(8*o)&BigInt(255));return e},Ne=t=>{let e=BigInt.asUintN(64,0n);for(let o=0;o<8;o++)e=e<<BigInt(8)^BigInt(t[o]);return e},Ue=t=>t.map(o=>me[o]),le=t=>{let o=t;for(let r=0;r<8;r++)for(let n=0;n<8;n++){let i=r*8+n;if((t&1n<<BigInt(i))!==0n)for(let s=-1;s<=1;s++)for(let p=-1;p<=1;p++){let v=r+s,C=n+p;if(v>=0&&v<8&&C>=0&&C<8&&!(s!==0&&p!==0)){let V=v*8+C;o|=1n<<BigInt(V)}}}return o&=~t,o},Re=t=>{let e=l.empty();return t.forEach(o=>{let r=T(we(o));e=e.setBit(r)}),e},Ge=t=>{if(t.length%2!==0)return u.WRONG_INPUT;let e=t.match(/.{1,2}/g);return e?e.map(o=>o.toUpperCase()):u.WRONG_INPUT},oe=t=>{let e=Ge(t);if(A(e))return l.empty();let o=Re(e);return A(o)?l.empty():o};var fe=["A","B","C","D","E","F","G","H"];var T=t=>t.rank*8+t.file,X=t=>z(J(t),K(t)),z=(t,e)=>({rank:t,file:e}),ge=(t,e)=>t.file===e.file&&t.rank===e.rank,ne=t=>`${fe[t.file]}${t.rank+1}`,we=t=>z(Number(t[1])-1,fe.findIndex(e=>e===t[0]));var Y=(t,e)=>({origin:t,destination:e}),de=(t,e)=>ge(t.origin,e.origin)&&ge(t.destination,e.destination),q=t=>`${ne(t.origin)} => ${ne(t.destination)}`;var Le=y("p-6 pt-0",{variants:{},defaultVariants:{}}),ye=(()=>{let e=class e{constructor(){this._userCls=h(""),this._computedClass=x(()=>this._generateClass())}set class(r){this._userCls.set(r)}_generateClass(){return w(Le(),this._userCls())}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=b({type:e,selectors:[["","hlmCardContent",""]],hostVars:2,hostBindings:function(n,i){n&2&&B(i._computedClass())},inputs:{class:"class"},standalone:!0});let t=e;return t})();var ze=y("flex p-6 pt-0",{variants:{direction:{row:"flex-row items-center space-x-1.5",column:"flex-col space-y-1.5"}},defaultVariants:{direction:"row"}}),Me=(()=>{let e=class e{constructor(){this._userCls=h(""),this._direction=h("row"),this._computedClass=x(()=>this._generateClass())}set class(r){this._userCls.set(r)}set direction(r){this._direction.set(r)}_generateClass(){return w(ze({direction:this._direction()}),this._userCls())}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=b({type:e,selectors:[["","hlmCardFooter",""]],hostVars:2,hostBindings:function(n,i){n&2&&B(i._computedClass())},inputs:{class:"class",direction:"direction"},standalone:!0});let t=e;return t})();var $e=y("flex p-6",{variants:{direction:{row:"flex-row items-center space-x-1.5",column:"flex-col space-y-1.5"}},defaultVariants:{direction:"column"}}),Te=(()=>{let e=class e{constructor(){this._userCls=h(""),this._direction=h("column"),this._computedClass=x(()=>this._generateClass())}set class(r){this._userCls.set(r)}set direction(r){this._direction.set(r)}_generateClass(){return w($e({direction:this._direction()}),this._userCls())}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=b({type:e,selectors:[["","hlmCardHeader",""]],hostVars:2,hostBindings:function(n,i){n&2&&B(i._computedClass())},inputs:{class:"class",direction:"direction"},standalone:!0});let t=e;return t})();var We=y("text-lg font-semibold leading-none tracking-tight",{variants:{},defaultVariants:{}}),ke=(()=>{let e=class e{constructor(){this._userCls=h(""),this._computedClass=x(()=>this._generateClass())}set class(r){this._userCls.set(r)}_generateClass(){return w(We(),this._userCls())}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=b({type:e,selectors:[["","hlmCardTitle",""]],hostVars:2,hostBindings:function(n,i){n&2&&B(i._computedClass())},inputs:{class:"class"},standalone:!0});let t=e;return t})();var je=y("rounded-lg border border-border bg-card focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-card-foreground shadow-sm",{variants:{},defaultVariants:{}}),Ee=(()=>{let e=class e{constructor(){this._userCls=h(""),this._computedClass=x(()=>this._generateClass())}set class(r){this._userCls.set(r)}_generateClass(){return w(je(),this._userCls())}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=b({type:e,selectors:[["","hlmCard",""]],hostVars:2,hostBindings:function(n,i){n&2&&B(i._computedClass())},inputs:{class:"class"},standalone:!0});let t=e;return t})();var Ye=t=>({highlighted:t});function Xe(t,e){if(t&1){let o=E();a(0,"button",16),f("click",function(){let i=g(o).$index,s=d();return _(s.sendGoTo(i+1))}),ae(1),c()}if(t&2){let o=e.$implicit,r=e.$index,n=d();S("ngClass",W(3,Ye,r+1===n.board.moveHistory.length)),m(1),Ce(" ",r+1," ",n.MoveToString(o)," ")}}var Oe=(()=>{let e=class e{constructor(){this.goToEvent=new P,this.undoEvent=new P,this.resetEvent=new P,this.redoEvent=new P}get allMovesHistory(){return[...this.board.moveHistory,...[...this.board.undoHistory].reverse()]}sendGoTo(r){this.goToEvent.emit(r)}sendUndo(){this.undoEvent.emit()}sendRedo(){this.redoEvent.emit()}sendReset(){this.resetEvent.emit()}MoveToString(r){return q(r)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=O({type:e,selectors:[["board-info"]],inputs:{board:"board"},outputs:{goToEvent:"goToEvent",undoEvent:"undoEvent",resetEvent:"resetEvent",redoEvent:"redoEvent"},standalone:!0,features:[I],decls:30,vars:0,consts:[["hlmCard","",1,"rounded-xl","h-full","flex","flex-col","justify-between","items-center"],["hlmCardHeader",""],["hlmCardTitle",""],["hlmCardContent","",1,"bg-secondary","p-0","flex","flex-col","rounded-xl","overflow-y-auto","moves"],["hlmCardFooter","",1,"justify-between","pt-6"],["hlmBtn","","size","icon",3,"click"],["width","24","height","24","viewBox","0 0 4.2333333 4.2333333","version","1.1","id","svg5","xmlns","http://www.w3.org/2000/svg",0,"xmlns","svg","http://www.w3.org/2000/svg",1,"stroke-primary-foreground"],["id","defs2"],["id","TriangleStart","refX","0","refY","0","orient","auto-start-reverse","markerWidth","1","markerHeight","1.1560694","viewBox","0 0 5.3244081 6.1553851","preserveAspectRatio","xMidYMid","markerUnits","userSpaceOnUse",2,"overflow","visible"],["transform","scale(0.5)","d","M 5.77,0 -2.88,5 V -5 Z","id","path135",2,"fill","context-stroke","fill-rule","evenodd","stroke","context-stroke","stroke-width","1pt"],["id","layer1","transform","translate(6059.8841,-12679.23)"],["id","path398","d","m 6059.5497,12681.347 a 1.7825664,1.7828199 0 0 1 -1.3968,1.74 1.7825664,1.7828199 0 0 1 -2.0014,-0.987 1.7825664,1.7828199 0 0 1 0.5304,-2.168 1.7825664,1.7828199 0 0 1 2.231,0.05","transform","scale(-1,1)",2,"fill","none","stroke-width","0.66851","stroke-linecap","round","stroke-dasharray","none","stroke-opacity","1","marker-end","url(#TriangleStart)"],["id","path398","d","m -6055.985,12681.347 a 1.7825664,1.7828199 0 0 1 -1.3968,1.74 1.7825664,1.7828199 0 0 1 -2.0013,-0.987 1.7825664,1.7828199 0 0 1 0.5304,-2.168 1.7825664,1.7828199 0 0 1 2.2309,0.05",2,"fill","none","stroke-width","0.66851","stroke-linecap","round","stroke-dasharray","none","stroke-opacity","1","marker-end","url(#TriangleStart)"],["hlmBtn","","size","icon","variant","destructive",3,"click"],["id","path398","d","m -6056.2233,12682.238 a 1.7825664,1.7828199 0 0 1 -1.5438,0.891 1.7825664,1.7828199 0 0 1 -1.5437,-0.891",2,"fill","none","stroke-width","0.66851","stroke-linecap","round","stroke-dasharray","none","stroke-opacity","1","marker-end","url(#TriangleStart)"],["id","path7713","d","m 6059.3108,-12680.456 a 1.7825664,1.7828199 0 0 1 -1.5437,0.891 1.7825664,1.7828199 0 0 1 -1.5438,-0.891","transform","scale(-1)",2,"fill","none","stroke-width","0.66851","stroke-linecap","round","stroke-dasharray","none","stroke-opacity","1","marker-end","url(#TriangleStart)"],["hlmBtn","","variant","outline",1,"w-full","text-secondary-foreground",3,"ngClass","click"],["hlmBtn","","variant","outline","class","w-full text-secondary-foreground",3,"ngClass"]],template:function(n,i){n&1&&(a(0,"section",0)(1,"div",1)(2,"h3",2),ae(3,"Board Info"),c()(),a(4,"section",3),N(5,Xe,2,5,"button",17,D),c(),a(7,"div",4)(8,"button",5),f("click",function(){return i.sendUndo()}),Z(),a(9,"svg",6)(10,"defs",7)(11,"marker",8),k(12,"path",9),c()(),a(13,"g",10),k(14,"path",11),c()()(),se(),a(15,"button",5),f("click",function(){return i.sendRedo()}),Z(),a(16,"svg",6)(17,"defs",7)(18,"marker",8),k(19,"path",9),c()(),a(20,"g",10),k(21,"path",12),c()()(),se(),a(22,"button",13),f("click",function(){return i.sendReset()}),Z(),a(23,"svg",6)(24,"defs",7)(25,"marker",8),k(26,"path",9),c()(),a(27,"g",10),k(28,"path",14)(29,"path",15),c()()()()()),n&2&&(m(5),U(i.allMovesHistory))},dependencies:[F,Q,ye,Te,Me,Ee,ke,xe],styles:[".moves[_ngcontent-%COMP%]{width:90%;height:250px}.highlighted[_ngcontent-%COMP%]{background-color:hsl(var(--secondary-foreground));color:hsl(var(--secondary))}@media screen and (max-width: 830px){[_nghost-%COMP%]{width:100%}.moves[_ngcontent-%COMP%]{height:fit-content}}.icon[_ngcontent-%COMP%]{fill:--primary-foreground}"]});let t=e;return t})();function Ze(t,e){if(t&1){let o=E();a(0,"div",1),f("click",function(){let i=g(o).$implicit,s=d();return _(s.setSelectedSquare(i.file,i.rank))}),c()}if(t&2){let o=e.$implicit,r=d();$("grid-column",o.file+1)("grid-row",r.board.HEIGHT-o.rank+1)}}function Qe(t,e){if(t&1){let o=E();a(0,"div",2),f("click",function(){let i=g(o).$implicit,s=d();return _(s.setSelectedSquare(i.file,i.rank))}),c()}if(t&2){let o=e.$implicit,r=d();$("grid-column",o.file+1)("grid-row",r.board.HEIGHT-o.rank+1)}}var Ie=t=>({highlighted:t});function Je(t,e){if(t&1){let o=E();a(0,"div",3),f("click",function(){let i=g(o).$implicit,s=d();return _(s.setSelectedPiece(i.file,i.rank))}),c()}if(t&2){let o=e.$implicit,r=d();$("grid-column",o.file+1)("grid-row",r.board.HEIGHT-o.rank+1),S("ngClass",W(5,Ie,o.file===(r.selectedPieceSquare==null?null:r.selectedPieceSquare.file)&&o.rank===(r.selectedPieceSquare==null?null:r.selectedPieceSquare.rank)))}}function Ke(t,e){if(t&1){let o=E();a(0,"div",4),f("click",function(){let i=g(o).$implicit,s=d();return _(s.setSelectedPiece(i.file,i.rank))}),c()}if(t&2){let o=e.$implicit,r=d();$("grid-column",o.file+1)("grid-row",r.board.HEIGHT-o.rank+1),S("ngClass",W(5,Ie,o.file===(r.selectedPieceSquare==null?null:r.selectedPieceSquare.file)&&o.rank===(r.selectedPieceSquare==null?null:r.selectedPieceSquare.rank)))}}var Fe=(()=>{let e=class e{constructor(){this.moveEvent=new P,this.squares=Array(64).fill(0).map((r,n)=>X(n)),this.selectedPieceSquare=null,this.selectedSquare=null}setSelectedPiece(r,n){this.selectedPieceSquare=z(n,r)}setSelectedSquare(r,n){if(!this.selectedPieceSquare)return;this.selectedSquare=z(n,r);let i=Y(this.selectedPieceSquare,this.selectedSquare);this.sendMove(i),this.selectedPieceSquare=null,this.selectedSquare=null}sendMove(r){this.moveEvent.emit(r)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=O({type:e,selectors:[["board-canvas"]],inputs:{board:"board"},outputs:{moveEvent:"moveEvent"},standalone:!0,features:[I],decls:9,vars:0,consts:[[1,"wrapper"],[1,"square","bg-muted",3,"click"],[1,"square","bg-yellow-200",3,"click"],[1,"piece","bg-muted-foreground",3,"ngClass","click"],[1,"piece","bg-secondary-foreground",3,"ngClass","click"],["class","square bg-muted",3,"gridColumn","gridRow"],["class","square bg-yellow-200",3,"gridColumn","gridRow"],["class","piece bg-muted-foreground",3,"ngClass","gridColumn","gridRow"],["class","piece bg-secondary-foreground",3,"ngClass","gridColumn","gridRow"]],template:function(n,i){n&1&&(a(0,"div",0),N(1,Ze,1,4,"div",5,D),N(3,Qe,1,4,"div",6,D),N(5,Je,1,7,"div",7,D),N(7,Ke,1,7,"div",8,D),c()),n&2&&(m(1),U(i.squares),m(2),U(i.board.golden_squares),m(2),U(i.board.normie_pieces),m(2),U(i.board.golden_pieces))},dependencies:[F,Q],styles:[".wrapper[_ngcontent-%COMP%]{aspect-ratio:1;display:grid;width:min(400px,50vw);min-width:250px;grid-template-columns:repeat(8,1fr);grid-template-rows:repeat(8,1fr);justify-items:center;align-items:center}.piece[_ngcontent-%COMP%]{transition:background-color .5s;width:100%;border-radius:100%;aspect-ratio:1;display:block}.square[_ngcontent-%COMP%]{width:100%;transition:all .5s;aspect-ratio:1;display:block;outline-style:solid;outline-width:2px;outline-offset:-1px;outline-color:hsl(var(--muted-foreground))}.piece[_ngcontent-%COMP%]:hover{background-color:red}.highlighted[_ngcontent-%COMP%]{scale:1.5}"]});let t=e;return t})();function et(t,e){if(t&1){let o=E();a(0,"board-info",2),f("undoEvent",function(){g(o);let n=d();return _(n.undoMove())})("resetEvent",function(){g(o);let n=d();return _(n.resetBoard())})("redoEvent",function(){g(o);let n=d();return _(n.redoMove())})("goToEvent",function(n){g(o);let i=d();return _(i.goToMove(n))}),c()}if(t&2){let o=d();S("board",o.board)}}var qe=(()=>{let e=class e{inputRandomMove(){let r=this.board.currentLegalMoves,n=tt(r);if(!n){this.resetBoard();return}this.board.inputMove(n)===M.WIN&&console.log("YOU WONN")}inputMove(r){let n=this.board.inputMove(r);if(Object.values(u).includes(n)){console.error(n);return}console.log(this.board.moveHistory.length,q(r)),n===M.WIN&&console.log(n)}undoMove(){this.board.undoMove()}goToMove(r){let n=this.board.goToMove(r);if(A(n)){console.error(n);return}let i=this.board.moveHistory[this.board.moveHistory.length-1];if(!i)return;let s=q(i);console.log(this.board.moveHistory.length,s)}redoMove(){this.board.redoMove()}resetBoard(){this.board.resetBoard()}logMoves(){let r=this.board.moveHistory.map(i=>q(i)),n=this.board.undoHistory.map(i=>q(i));console.log(r),console.log(n)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=O({type:e,selectors:[["board"]],inputs:{board:"board",showInfo:"showInfo"},standalone:!0,features:[I],decls:3,vars:2,consts:[[3,"board","moveEvent"],[3,"board"],[3,"board","undoEvent","resetEvent","redoEvent","goToEvent"]],template:function(n,i){n&1&&(a(0,"main")(1,"board-canvas",0),f("moveEvent",function(p){return i.inputMove(p)}),c(),he(2,et,1,1,"board-info",1),c()),n&2&&(m(1),S("board",i.board),m(1),ve(2,i.showInfo?2:-1))},dependencies:[F,Fe,Oe],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}main[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:20px}@media screen and (max-width: 830px){main[_ngcontent-%COMP%]{flex-direction:column}}.actions[_ngcontent-%COMP%]{width:100vw;display:flex;justify-content:center;align-items:center}"]});let t=e;return t})();function tt(t){if(t.length===0)return;let e=Math.floor(Math.random()*t.length);return t[e]}var Rr=(()=>{let e=class e{constructor(){this.activatedRoute=_e(be),this.normie_pieces_bitboard=oe(this.activatedRoute.snapshot.params.normie_pieces),this.golden_piece_bitboard=oe(this.activatedRoute.snapshot.params.golden_piece),this.golden_square_bitboard=oe(this.activatedRoute.snapshot.params.golden_square),this.board=new j(this.normie_pieces_bitboard,this.golden_piece_bitboard,this.golden_square_bitboard)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=O({type:e,selectors:[["puzzle-repo-level-n"]],standalone:!0,features:[I],decls:2,vars:2,consts:[[1,"bg-background","flex-grow","flex","flex-col","items-center","justify-center"],[3,"board","showInfo"]],template:function(n,i){n&1&&(a(0,"main",0),k(1,"board",1),c()),n&2&&(m(1),S("board",i.board)("showInfo",!0))},dependencies:[F,qe],styles:["[_nghost-%COMP%]{flex-grow:1;display:flex;flex-direction:column}"]});let t=e;return t})();export{Rr as LevelNComponent};
